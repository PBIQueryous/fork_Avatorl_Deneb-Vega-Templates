{
  "$schema": "https://vega.github.io/schema/vega/v5.json",
  "usermeta": {
    "deneb": {
      "build": "1.5.1.0",
      "metaVersion": 1,
      "provider": "vega",
      "providerVersion": "5.23.0"
    },
    "interactivity": {
      "tooltip": true,
      "contextMenu": true,
      "selection": true,
      "highlight": true,
      "dataPointLimit": 50
    },
    "information": {
      "name": "Deviation - Surplus/Deficit Filled Line Chart",
      "description": "To show balance against a baseline or between 2 series",
      "author": "Andrzej Leszkiewicz",
      "uuid": "b5afa02b-99da-440d-8522-32def55757e0",
      "generated": "2023-09-15T21:59:23.511Z",
      "previewImageBase64PNG": "data:image/png;base64,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"
    },
    "dataset": [
      {
        "key": "__0__",
        "name": "Date",
        "description": "Date-time",
        "type": "dateTime",
        "kind": "column"
      },
      {
        "key": "__1__",
        "name": "Difference",
        "description": "Value (negative/positive)",
        "type": "numeric",
        "kind": "column"
      }
    ],
    "Project": "Deneb Vega Templates by Andrzej Leszkiewicz",
    "Github": "https://github.com/avatorl/Deneb-Vega-Templates/",
    "Author": "Andrzej Leszkewicz",
    "License": "CC BY 4.0 (Share and Adapt with Attribution)",
    "Inspired By (chart types)": "FT Visual Vocabulary (https://ft.com/vocabulary)"
  },
  "config": {},
  "description": "Deviation - Surplus/Deficit Filled Line Chart. To show balance against a baseline or between 2 series.",
  "padding": 15,
  "autosize": "fit",
  "background": "white",
  "signals": [
    {
      "name": "width",
      "description": "Responsive. Based on container size.",
      "value": 400,
      "update": "containerSize()[0]-30"
    },
    {
      "name": "height",
      "description": "Responsive. Based on container size.",
      "value": 400,
      "update": "containerSize()[1]-30"
    },
    {
      "name": "titleText",
      "value": "Surplus/Deficit Filled Line Chart"
    },
    {
      "name": "subTitleText",
      "value": "To show balance against a baseline or between 2 series"
    },
    {
      "name": "barColor1",
      "init": "pbiColor(0)"
    },
    {
      "name": "barColor2",
      "init": "pbiColor(2)"
    },
    {
      "name": "titleColor",
      "value": "#333333"
    },
    {
      "name": "labelColor",
      "value": "#666666"
    },
    {
      "name": "titleFontSize",
      "value": 24
    },
    {
      "name": "subtitleFontSize",
      "value": 16
    },
    {
      "name": "labelFontSize",
      "value": 16
    },
    {
      "name": "strokeWidth",
      "value": 0.5
    },
    {
      "name": "strokeColor",
      "value": "#666666"
    },
    {
      "name": "titleOffset",
      "description": "Blank space between the subtitle and the chart, px",
      "value": 20
    },
    {
      "name": "subtitlePadding",
      "description": "Blank space between the title and the subtitle, px",
      "value": 10
    },
    {
      "name": "leftPadding",
      "description": "For Axis Y",
      "value": 10
    },
    {
      "name": "bottomPadding",
      "description": "For Axis X",
      "value": 10
    },
    {
      "name": "periods",
      "description": "number of periods",
      "update": "(length(data('dataset'))-1)"
    },
    {
      "name": "pixelsPerDate",
      "description": "number of pixels per period",
      "update": "round((width-leftPadding)/periods)"
    }
  ],
  "data": [
    {"name": "dataset"},
    {
      "name": "pixels",
      "transform": [
        {
          "type": "sequence",
          "start": 0,
          "stop": {
            "signal": "width-leftPadding"
          },
          "as": "x"
        },
        {
          "type": "formula",
          "expr": "floor(datum.x/pixelsPerDate)",
          "as": "row"
        },
        {
          "type": "formula",
          "expr": "datum.row+1",
          "as": "row2"
        },
        {
          "type": "formula",
          "expr": "(datum.x/pixelsPerDate-floor(datum.x/pixelsPerDate))*pixelsPerDate",
          "as": "rowx"
        },
        {
          "type": "lookup",
          "from": "dataset",
          "key": "__row__",
          "fields": ["row"],
          "values": ["__1__"],
          "as": ["dif1"]
        },
        {
          "type": "lookup",
          "from": "dataset",
          "key": "__row__",
          "fields": ["row2"],
          "values": ["__1__"],
          "as": ["dif2"]
        },
        {
          "type": "formula",
          "expr": "((datum.dif2-datum.dif1)/pixelsPerDate*datum.rowx+datum.dif1)",
          "as": "y"
        }
      ]
    }
  ],
  "scales": [
    {
      "name": "scaleTime",
      "type": "time",
      "domain": {
        "data": "dataset",
        "field": "__0__"
      },
      "range": [
        {"signal": "leftPadding"},
        {"signal": "width"}
      ],
      "nice": true
    },
    {
      "name": "scaleValue",
      "type": "linear",
      "domain": {
        "data": "dataset",
        "field": "__1__"
      },
      "range": [
        {"signal": "0"},
        {
          "signal": "height-bottomPadding"
        }
      ],
      "nice": true
    }
  ],
  "title": {
    "text": {"signal": "titleText"},
    "anchor": "start",
    "offset": {"signal": "titleOffset"},
    "color": {"signal": "titleColor"},
    "fontSize": {
      "signal": "titleFontSize"
    },
    "subtitle": {
      "signal": "subTitleText"
    },
    "subtitlePadding": {
      "signal": "subtitlePadding"
    },
    "subtitleFontSize": {
      "signal": "subtitleFontSize"
    }
  },
  "axes": [
    {
      "orient": "left",
      "scale": "scaleValue",
      "labels": true,
      "grid": false,
      "labelFontSize": {
        "signal": "labelFontSize"
      },
      "labelColor": {
        "signal": "labelColor"
      },
      "labelOverlap": true,
      "ticks": true
    },
    {
      "orient": "bottom",
      "scale": "scaleTime",
      "labels": true,
      "grid": false,
      "labelFontSize": {
        "signal": "labelFontSize"
      },
      "labelColor": {
        "signal": "labelColor"
      },
      "labelOverlap": true,
      "ticks": true
    }
  ],
  "marks": [
    {
      "name": "area-positive",
      "type": "area",
      "from": {"data": "pixels"},
      "encode": {
        "enter": {
          "x": {
            "signal": "leftPadding+datum.x"
          },
          "y": {
            "scale": "scaleValue",
            "signal": "datum.y>0?-datum.y:0"
          },
          "y2": {
            "scale": "scaleValue",
            "signal": "0"
          },
          "fill": {
            "signal": "barColor1"
          },
          "stroke": {
            "signal": "strokeColor"
          },
          "strokeWidth": {
            "signal": "strokeWidth"
          }
        }
      }
    },
    {
      "name": "area-negative",
      "type": "area",
      "from": {"data": "pixels"},
      "encode": {
        "enter": {
          "x": {
            "signal": "leftPadding+datum.x"
          },
          "y": {
            "scale": "scaleValue",
            "signal": "datum.y<0?-datum.y:0"
          },
          "y2": {
            "scale": "scaleValue",
            "signal": "0"
          },
          "fill": {
            "signal": "barColor2"
          },
          "stroke": {
            "signal": "strokeColor"
          },
          "strokeWidth": {
            "signal": "strokeWidth"
          }
        }
      }
    }
  ]
}
